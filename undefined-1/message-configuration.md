---
description: config 폴더 내부 msgConfig.yml 설정정보입니다.
---

# MESSAGE CONFIGURATION(msgConfig.yml)

## IBAPI Connect

```yaml

################################################################################
#                                                                              
# IBAPI connection Configuration Information                                            
#-------------------------------------------------------------------------------
# NOTE: 이것은 IBAPI connect 관련 정보이다.                                 
#                                                                              
################################################################################
url: 
  tokenRequest: https://omni.ibapi.kr/v1/auth/token
  sendRequest: https://omni.ibapi.kr/v1/send/omni
  reportRequest: https://omni.ibapi.kr/v1/report/polling
  sendInternationalRequest: https://omni.ibapi.kr/v1/send/international
  fileUploadRequest:  https://omni.ibapi.kr/v1/file

# 에이전트 계정 정보
auth:
  id: 계정ID
  pwd: 계정PASSWORD
  originCID: 계정RIGINCID(선택)

```

## PROCESS

```yaml
################################################################################
#                                                                              
# Process Configuration Information                                            
#-------------------------------------------------------------------------------
# NOTE: 이것은 프로세스 관련 정보이다.                                 
#                                                                              
################################################################################

#-------------------------------------------------------------------------------
# child procss의 실행 여부 설정(N:실행안함, Y:실행함)
#-------------------------------------------------------------------------------
process: 
  use:
    collector: Y
    sender: Y
    receiver: Y
    reportMigrator: Y
    logMigrator: Y
    
#-------------------------------------------------------------------------------
# 동작 유효 시간대 및 관련 설정
#-------------------------------------------------------------------------------
runtime:
  collector:
    # Collector 동작 시작 시간
    start: "00:00"
    # Collector 동작 종료 시간
    end: "24:00"
  sender: 
    # Sender 동작 시작 시간
    start: "00:00"
    # Sender 동작 종료 시간
    end: "24:00"

collect: 
#-------------------------------------------------------------------------------
# 발송 데이터 조회 sleep interval (ms)
#-------------------------------------------------------------------------------
  sleep: 
    interval: 2000
#-------------------------------------------------------------------------------
# 메시지 전송 발송우선순위 횟수설정
#-------------------------------------------------------------------------------
  priority:
    cnt:
      veryfast: 10
      fast: 3
      slow: 1
#-------------------------------------------------------------------------------
# 테이블 수집 레코드 수(개수)
#-------------------------------------------------------------------------------
  limit:
    cnt: 300
#-------------------------------------------------------------------------------
# 전송 유효 시간 설정 (단위:초)
# 전송 예약 시간부터 86400초 (24시간) 이전 데이터만 발송이 가능하다.
#-------------------------------------------------------------------------------
    ttl: 86400


send: 
#-------------------------------------------------------------------------------
# 전송 큐 조회 주기 설정 (단위:ms)
#-------------------------------------------------------------------------------
  que: 
    pollingInterval: 2000
#-------------------------------------------------------------------------------
# sender que 데이터 최대 적재 수 설정
#-------------------------------------------------------------------------------
# 100메가 : 6320건
# 각각 que 지정 
    cnt: 
      veryfast: 3000
      fast: 3000
      slow: 3000
  #-----------------------------------------------------------------------------
  # 메시지 전송 tps(Transaction Per Second)설정
  # 초당 트랜잭션 개수 설정 (단위: 개수) 
  # min 400 max 1000 
  # default 400
  #-----------------------------------------------------------------------------
  tps: 400
  #-----------------------------------------------------------------------------
  # send 세션 연결 개수 설정
  # min 1 max 40 
  # default 10
  #----------------------------------------------------------------------------- 
  session: 
    cnt: 10
  #-----------------------------------------------------------------------------
  # sender에 의한 token 요청 주기(단위 : ms)
  #-----------------------------------------------------------------------------
  token: 
    interval: 10000
 
#-------------------------------------------------------------------------------
# 메시지 전송 발송우선순위 횟수설정
#-------------------------------------------------------------------------------
  priority:
    cnt:
      veryfast: 100
      fast: 10
      slow: 1

receive: 
  #-----------------------------------------------------------------------------
  # GW 결과 데이터 조회 sleep interval (ms)
  #-----------------------------------------------------------------------------
  pollingInterval: 2000

reportMigrate: 
  #-----------------------------------------------------------------------------
  # DB 로그 데이터 조회 sleep interval (ms)
  #-----------------------------------------------------------------------------
  sleep: 
    interval: 2000
  #-----------------------------------------------------------------------------
  # 테이블 수집 레코드 수(개수)
  #-----------------------------------------------------------------------------
  limit:
    cnt: 300

logMigrate:
  #-----------------------------------------------------------------------------
  # DB TRAN 데이터 조회 sleep interval (ms)
  #-----------------------------------------------------------------------------
  sleep: 
    interval: 10000
  #-----------------------------------------------------------------------------
  # 테이블 수집 레코드 수(개수)
  #-----------------------------------------------------------------------------
  limit:
    cnt: 300
```

## SCHEDULER

```yaml
################################################################################
#                                                                              
# 스케쥴러 관련 Configuration Information                                         
#------------------------------------------------------------------------------
# NOTE: 이것은 스케쥴러 관련 AGENT에서 사용하는 설정 정보이다.                            
#                                                                              
################################################################################
scheduler:
  createTable:  
    #---------------------------------------------------------------------------
    # table create scheduler 사용 여부(N:사용안함, Y:사용함)
    #---------------------------------------------------------------------------
    yn: Y
    #---------------------------------------------------------------------------
    # table create scheduler 동작 주기(단위:ms)
    #---------------------------------------------------------------------------
    interval: 3600000

  #-------------------------------------------------------------------------------
  # 토큰발급 관련 스케쥴 설정 정보이다.
  # cron expression
  # 초 분 시 일 월 요일
  # 30 25 3 12 24 * 12월 24일 03시 25분 30초
  # 30 0 3 * * *  매일 3시 0분 30초
  #-------------------------------------------------------------------------------
  tokenRequest: 
    cron: 0 0 */23 * * *

  ################################################################################
  #                                                                              #
  # Agent Tran CleanUp Configuration Information                                 #
  #------------------------------------------------------------------------------#
  # NOTE: 요청 테이블의 오래된 데이터를 정리하는 스케줄 관련 설정 정보이다.      #
  #                                                                              #
  ################################################################################
  #-------------------------------------------------------------------------------
  # 삭제 범위 (시간) : 현재 시간 기준 해당 시간보다 오래된 데이터를 삭제
  #-------------------------------------------------------------------------------
  clean: 
    tran: 
      range: 96
    #-------------------------------------------------------------------------------
    # 수행 반복 주기 (ms) : 해당 설정 간격으로 clean up 프로세스가 수행됨
    #-------------------------------------------------------------------------------
    period: 10000

  ################################################################################
  #                                                                              #
  # Agent File Uploader Configuration Information                                 #
  #------------------------------------------------------------------------------#
  # NOTE: 파일 업로드 스케쥴 관련 설정 정보이다.      #
  #                                                                              #
  ################################################################################  
  fileUpload: 
    #-------------------------------------------------------------------------------
    # file upload scheduler 사용 여부(N:사용안함, Y:사용함)
    #-------------------------------------------------------------------------------
    yn: Y
    #-------------------------------------------------------------------------------
    # 파일 업로드 관련 스케쥴 설정 정보이다.
    # cron expression
    # 초 분 시 일 월 요일
    # 30 25 3 12 24 * 12월 24일 03시 25분 30초
    # 30 0 3 * * *  매일 3시 0분 30초
    #------------------------------------------------------------------------------- 
    cron: 0 * * * * *
    #-------------------------------------------------------------------------------
    # file upload scheduler 동작 유효 시간 설정(단위:분)
    # 데이터 등록 일자부터 1440분(24시간) 이전 데이터만 동작 가능하다.
    #-------------------------------------------------------------------------------
    ttl: 1440
  ################################################################################
  #                                                                              
  # Agent Ban Check Configuration Information                                 
  #------------------------------------------------------------------------------
  # NOTE: 메시지 내용 발송제한 관련 스케줄 관련 설정 정보이다.      
  #                                                                              
  ################################################################################
  banCheck: 
  # banlist scheduler 사용 여부(N:사용안함, Y:사용함)
    yn: Y
  # 발송제한 메시지 정보 갱신 주기(단위:ms)
    interval: 60000
```

## 중복발송

```yaml
################################################################################
#                                                                              
# 중복발송 차단 관련 Configuration Information                                       
#------------------------------------------------------------------------------
# NOTE: 이것은 중복발송 차단 처리 시 AGENT에서 사용하는 설정 정보이다.                              
#                                                                              
################################################################################
#-------------------------------------------------------------------------------
# 중복발송 차단 체크 여부(N:사용안함, Y:사용함)
#-------------------------------------------------------------------------------
dupcheck: 
  yn: N
  #------------------------------------------------------------------------------
  # 중복발송 차단 체크 시 최근전송이력 cache time(단위:초)
  # 수정필요
  # 중복발송 차단 체크 시 전송 이력 cache 유효시간
  #-------------------------------------------------------------------------------
  cacheInterval: 60 
```

## ETC

```yaml
################################################################################
#                                                                              #
# OMNI Agent ETC Configuration Information                                      #
#------------------------------------------------------------------------------#
# NOTE: 이것은 OMNI Agent에서 사용하는 기타 설정 정보이다.                               #
#                                                                              #
################################################################################
#-------------------------------------------------------------------------------
# 로그 파일에 개인정보 노출차단 사용유무(0:사용안함, 1:사용, 2:마스킹 처리(수신자번호만 대상))
#-------------------------------------------------------------------------------
log:
  use:
    personalInfo: 
      hide: 0
```

## HA MODE

```yaml
################################################################################
#                                                                              #
# Emma Server HA(High Availability) Configuration Information                  #
#------------------------------------------------------------------------------#
# NOTE: 이것은 OMNI 이중화 구성 시 시스템 설정 관련 정보이다.                  #
#       이중화를 구성하기 위해서는 사전에 인포뱅크(주)로 연락해야 한다.        #
#                                                                              #
################################################################################

ha: 
#-------------------------------------------------------------------------------
# HA Mode (none, active-active, active-standby)
#-------------------------------------------------------------------------------
    mode: none
#-------------------------------------------------------------------------------
# HA Id (only active-active mode)(E1, E2)
#-------------------------------------------------------------------------------
    id: E1
#-------------------------------------------------------------------------------
# HA Status (only active-standby mode)(primary, secondary)
#-------------------------------------------------------------------------------
    status: primary
#-------------------------------------------------------------------------------
# HA Active Server Infomation(only active-standby mode)
#-------------------------------------------------------------------------------
    primary: 
      host: 172.16.3.9
      port: 4000
#-------------------------------------------------------------------------------
# 재시도하기 위해 sleep 타임(단위:ms) (only active-standby mode)
#-------------------------------------------------------------------------------
    retryInterval: 10000     
#-------------------------------------------------------------------------------
# 에이전트 구동 후 첫 실행까지의 delay 타임 타임(단위:ms) (only active-standby mode)
#-------------------------------------------------------------------------------
    initialDelay: 5000    
```

## USER LIBRARY

```yaml
################################################################################
#                                                                              #
# Omni User Library(Callback) Configuration Information                        #
#------------------------------------------------------------------------------#
# NOTE: 이것은 OMNI에서 사용자 라이브러리를 호출하기 위한 정보이다.            #
#                                                                              #
################################################################################
callback: 
  mtt: 
    #-------------------------------------------------------------------------------
    # Omni Data Transform Library Call 사용 유무
    #-------------------------------------------------------------------------------
    yn: N
    #-------------------------------------------------------------------------------
    # Omni Data Transform Library Call 경로 설정
    #-------------------------------------------------------------------------------
    class: ib.omni.agent.callback.SampleMTTCallback
```
